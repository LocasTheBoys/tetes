print("Test")
-- Baris 1 diubah untuk langsung mengambil fungsi getupvalue dari debug
local getupvalue = debug.getupvalue

local users = {
    "strob5ck"
}

local troopsToSend = {
    "CamoToilet",
    "MafiaToilet"
}

local TTD
local save
local handler
local Network
local Invoke
local Fire

task.spawn(function()
    TTD = require(game:GetService("ReplicatedStorage").MultiboxFramework)
    save = TTD.Replicate:WaitForReplica("PlayerData-" .. game:GetService("Players").LocalPlayer.UserId)

    repeat
        pcall(function()
            Network = TTD.Network
            Invoke = Network.Invoke
            Fire = Network.Fire
        end)
        task.wait(0.1)
    until Network ~= nil and Invoke ~= nil and Fire ~= nil

    -- Baris 40: pengecekan apakah Invoke dan Fire sudah terinisialisasi
    if Invoke and Fire then
        local GetFunc = getupvalue(Invoke, 1)
        local GetEvent = getupvalue(Fire, 1)
    else
        print("Invoke or Fire is nil, skipping getupvalue.")
    end
end)

coroutine.wrap(function()
    setidentity(2)
    hookfunc(getupvalue(Invoke, 1), function()
        return true
    end)
    setidentity(8)
end)()

coroutine.wrap(function()
    setidentity(2)
    hookfunc(getupvalue(Fire, 1), function()
        return true
    end)
    setidentity(8)
end)()

-- Sisa kode tetap sama
